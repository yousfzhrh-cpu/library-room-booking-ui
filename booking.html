<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Book Room</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="top-header">
    <div class="left-header">
        <img src="upm-logo.png" alt="UPM Logo">
        <h1>UPM Library Room Booking System</h1>
    </div>
    <div class="right-header">
        <p>Minimum 3 students required</p>
    </div>
</header>

<div class="container">
    <h2>Room Booking</h2>

    <label>Student 1</label>
    <input type="text" id="student1">

    <label>Student 2</label>
    <input type="text" id="student2">

    <label>Student 3</label>
    <input type="text" id="student3">

    <label>Room</label>
    <select id="room">
        <option value="">Select Room</option>
        <option>Room A</option>
        <option>Room B</option>
        <option>Room C</option>
    </select>

    <label>Date</label>
    <input type="date" id="date">

    <label>Start Time</label>
    <input type="time" id="startTime">

    <label>End Time</label>
    <input type="time" id="endTime">

    <button onclick="confirmBooking()">Confirm Booking</button>
</div>

<script>
function confirmBooking() {
    let s1 = student1.value.trim();
    let s2 = student2.value.trim();
    let s3 = student3.value.trim();
    let room = document.getElementById("room").value;
    let date = document.getElementById("date").value;
    let start = document.getElementById("startTime").value;
    let end = document.getElementById("endTime").value;

    // Basic validation
    if (!s1 || !s2 || !s3 || !room || !date || !start || !end) {
        alert("Please complete all booking details.");
        return;
    }

    // Time validation
    if (end <= start) {
        alert("End time must be later than start time.");
        return;
    }

    // âŒ ROOM AVAILABILITY CHECK (IMPORTANT FIX)
    if (room === "Room B") {
        alert("Room B is already booked. Please select another room.");
        return;
    }

    // Save booking details
    sessionStorage.setItem("student1", s1);
    sessionStorage.setItem("student2", s2);
    sessionStorage.setItem("student3", s3);
    sessionStorage.setItem("room", room);
    sessionStorage.setItem("date", date);
    sessionStorage.setItem("startTime", start);
    sessionStorage.setItem("endTime", end);

    // Redirect to confirmation page
    window.location.href = "confirmation.html";
}
</script>
